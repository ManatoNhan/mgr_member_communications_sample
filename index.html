<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çµ±åˆã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆ†æãƒ„ãƒ¼ãƒ«</title>
    <style>
        body {
            font-family: 'Hiragino Sans', 'Yu Gothic', sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8f9fa;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        .section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .section h2 {
            color: #2c3e50;
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 18px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 8px;
        }
        .controls {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        .control-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        select {
            padding: 6px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 13px;
        }
        .toggle-btn {
            padding: 6px 12px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
        }
        .toggle-btn:hover {
            background: #2980b9;
        }
        .toggle-btn.active {
            background: #e74c3c;
        }
        
        /* 4è±¡é™ãƒãƒƒãƒ”ãƒ³ã‚° */
        .quadrant-container {
            position: relative;
            height: 500px;
            border: 2px solid #34495e;
        }
        .axis-labels {
            position: absolute;
            font-weight: bold;
            color: #2c3e50;
            font-size: 14px;
        }
        .axis-vertical {
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
        }
        .axis-horizontal {
            bottom: -25px;
            right: 0;
        }
        .axis-vertical-bottom {
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
        }
        .axis-horizontal-left {
            top: 50%;
            left: -80px;
            transform: translateY(-50%) rotate(-90deg);
        }
        .quadrant {
            position: absolute;
            width: calc(50% - 1px);
            height: calc(50% - 1px);
            border: 1px solid #bdc3c7;
            box-sizing: border-box;
        }
        .q1 { top: 0; right: 0; background: rgba(52, 152, 219, 0.03); }
        .q2 { top: 0; left: 0; background: rgba(46, 204, 113, 0.03); }
        .q3 { bottom: 0; left: 0; background: rgba(243, 156, 18, 0.03); }
        .q4 { bottom: 0; right: 0; background: rgba(231, 76, 60, 0.03); }
        .quadrant-label {
            position: absolute;
            font-weight: bold;
            font-size: 11px;
            color: #7f8c8d;
            pointer-events: none;
        }
        .label-q1 { top: 8px; right: 8px; }
        .label-q2 { top: 8px; left: 8px; }
        .label-q3 { bottom: 8px; left: 8px; }
        .label-q4 { bottom: 8px; right: 8px; }
        .person-point {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        .person-point:hover {
            transform: scale(1.4);
            z-index: 10;
        }
        .person-point.selected {
            transform: scale(1.6);
            z-index: 15;
            border-width: 3px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        }
        .person-label {
            position: absolute;
            font-size: 9px;
            font-weight: bold;
            color: #2c3e50;
            background: rgba(255,255,255,0.95);
            padding: 2px 5px;
            border-radius: 3px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
            pointer-events: none;
            white-space: nowrap;
            transform: translate(-50%, -20px);
            opacity: 0;
            transition: opacity 0.2s;
        }
        .person-point:hover .person-label,
        .person-point.selected .person-label {
            opacity: 1;
        }
        .manager-point {
            background-color: #3498db;
            border-color: #2980b9;
        }
        .manager-point.selected {
            border-color: #1abc9c;
        }
        .subordinate-point {
            background-color: #e74c3c;
            border-color: #c0392b;
        }
        .subordinate-point.selected {
            border-color: #f39c12;
        }
        .compatibility-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, #3498db, #e74c3c);
            transform-origin: left center;
            opacity: 0.7;
            pointer-events: none;
            z-index: 5;
        }
        .compatibility-excellent {
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            height: 4px;
        }
        .compatibility-good {
            background: linear-gradient(90deg, #3498db, #5dade2);
            height: 3px;
        }
        .compatibility-normal {
            background: linear-gradient(90deg, #f39c12, #f7dc6f);
            height: 2px;
        }
        .compatibility-difficult {
            background: linear-gradient(90deg, #e74c3c, #ec7063);
            height: 2px;
            opacity: 0.5;
        }
        
        /* ãƒãƒˆãƒªã‚¯ã‚¹ */
        .matrix-container {
            overflow: auto;
            max-height: 500px;
        }
        .matrix-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 10px;
        }
        .matrix-table th {
            background: #34495e;
            color: white;
            padding: 6px 3px;
            text-align: center;
            font-weight: bold;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .matrix-table th.row-header {
            background: #2c3e50;
            min-width: 80px;
            text-align: left;
            position: sticky;
            left: 0;
            z-index: 11;
        }
        .matrix-table th.col-header {
            writing-mode: vertical-rl;
            text-orientation: mixed;
            min-width: 25px;
            max-width: 25px;
        }
        .matrix-table td {
            padding: 4px 3px;
            text-align: center;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: bold;
            min-width: 25px;
        }
        .matrix-table td:hover {
            transform: scale(1.1);
            z-index: 5;
            position: relative;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        .matrix-table td.selected {
            transform: scale(1.2);
            z-index: 8;
            position: relative;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
            border: 2px solid #f39c12;
        }
        .excellent { background: #2ecc71; color: white; }
        .good { background: #3498db; color: white; }
        .normal { background: #f39c12; color: white; }
        .difficult { background: #e74c3c; color: white; }
        .row-header-cell {
            background: #2c3e50 !important;
            color: white !important;
            position: sticky;
            left: 0;
            z-index: 9;
        }
        
        /* è©³ç´°ãƒ‘ãƒãƒ« */
        .detail-panel {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            grid-column: 1 / -1;
        }
        .detail-title {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .detail-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .communication-style {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        .communication-style h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 14px;
        }
        .style-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .style-list li {
            padding: 4px 0;
            border-bottom: 1px solid #ecf0f1;
            font-size: 12px;
        }
        .style-list li:last-child {
            border-bottom: none;
        }
        .compatibility-info {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
        }
        .compatibility-score {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>çµ±åˆã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆ†æãƒ„ãƒ¼ãƒ«</h1>
        
        <div class="controls">
            <div class="control-group">
                <label>ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼:</label>
                <select id="managerSelect">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                </select>
            </div>
            <div class="control-group">
                <label>éƒ¨ä¸‹:</label>
                <select id="subordinateSelect">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                </select>
            </div>
            <button class="toggle-btn" id="showAllBtn" onclick="toggleShowAll()">å…¨è¡¨ç¤º</button>
            <button class="toggle-btn" id="syncBtn" onclick="toggleSync()">é€£å‹•è¡¨ç¤º</button>
        </div>
        
        <div class="main-layout">
            <!-- 4è±¡é™ãƒãƒƒãƒ”ãƒ³ã‚° -->
            <div class="section">
                <h2>ğŸ“Š 4è±¡é™ãƒãƒƒãƒ”ãƒ³ã‚°</h2>
                <div class="quadrant-container">
                    <div class="axis-labels axis-vertical">ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯†åº¦ï¼šé«˜</div>
                    <div class="axis-labels axis-vertical-bottom">ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯†åº¦ï¼šä½</div>
                    <div class="axis-labels axis-horizontal-left">ä¸Šå¸ä¸»å°</div>
                    <div class="axis-labels axis-horizontal">éƒ¨ä¸‹ä¸»å°</div>
                    
                    <div class="quadrant q1">
                        <div class="quadrant-label label-q1">å¯†æ¥å§”è­²å‹</div>
                    </div>
                    <div class="quadrant q2">
                        <div class="quadrant-label label-q2">å¯†æ¥æŒ‡å°å‹</div>
                    </div>
                    <div class="quadrant q3">
                        <div class="quadrant-label label-q3">è·é›¢æŒ‡å°å‹</div>
                    </div>
                    <div class="quadrant q4">
                        <div class="quadrant-label label-q4">è·é›¢å§”è­²å‹</div>
                    </div>
                    
                    <!-- ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®ç‚¹ -->
                    <div class="person-point manager-point" style="top: 20%; right: 25%;" data-type="manager" data-name="å§”è­²æˆé•·å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">å§”è­²æˆé•·å‹</div>
                    </div>
                    <div class="person-point manager-point" style="top: 30%; right: 35%;" data-type="manager" data-name="å”èª¿å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">å”èª¿å‹</div>
                    </div>
                    <div class="person-point manager-point" style="top: 15%; right: 30%;" data-type="manager" data-name="ãƒ“ã‚¸ãƒ§ãƒ³å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">ãƒ“ã‚¸ãƒ§ãƒ³å‹</div>
                    </div>
                    <div class="person-point manager-point" style="top: 35%; right: 15%;" data-type="manager" data-name="ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‹</div>
                    </div>
                    
                    <div class="person-point manager-point" style="top: 20%; left: 25%;" data-type="manager" data-name="å¯†ç€æŒ‡å°å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">å¯†ç€æŒ‡å°å‹</div>
                    </div>
                    <div class="person-point manager-point" style="top: 30%; left: 35%;" data-type="manager" data-name="å®‰å®šç®¡ç†å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">å®‰å®šç®¡ç†å‹</div>
                    </div>
                    <div class="person-point manager-point" style="top: 10%; left: 20%;" data-type="manager" data-name="å®Œç’§ä¸»ç¾©å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">å®Œç’§ä¸»ç¾©å‹</div>
                    </div>
                    <div class="person-point manager-point" style="top: 25%; left: 15%;" data-type="manager" data-name="ä¿è­·å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">ä¿è­·å‹</div>
                    </div>
                    
                    <div class="person-point manager-point" style="bottom: 25%; left: 30%;" data-type="manager" data-name="åŠ¹ç‡è¿½æ±‚å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">åŠ¹ç‡è¿½æ±‚å‹</div>
                    </div>
                    <div class="person-point manager-point" style="bottom: 35%; left: 20%;" data-type="manager" data-name="ç«æ¶ˆã—å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">ç«æ¶ˆã—å‹</div>
                    </div>
                    
                    <div class="person-point manager-point" style="bottom: 20%; right: 25%;" data-type="manager" data-name="çµæœé‡è¦–å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">çµæœé‡è¦–å‹</div>
                    </div>
                    <div class="person-point manager-point" style="bottom: 30%; right: 35%;" data-type="manager" data-name="èª¿æ•´å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">èª¿æ•´å‹</div>
                    </div>

                    <!-- éƒ¨ä¸‹ã®ç‚¹ -->
                    <div class="person-point subordinate-point" style="top: 25%; right: 20%;" data-type="subordinate" data-name="ç©æ¥µææ¡ˆå‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">ç©æ¥µææ¡ˆå‹</div>
                    </div>
                    <div class="person-point subordinate-point" style="top: 35%; right: 10%;" data-type="subordinate" data-name="å•é¡Œè§£æ±ºå‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">å•é¡Œè§£æ±ºå‹</div>
                    </div>
                    <div class="person-point subordinate-point" style="top: 15%; right: 35%;" data-type="subordinate" data-name="è‡ªå¾‹å®Ÿè¡Œå‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">è‡ªå¾‹å®Ÿè¡Œå‹</div>
                    </div>
                    
                    <div class="person-point subordinate-point" style="top: 15%; left: 30%;" data-type="subordinate" data-name="æ¨¡ç¯„ç”Ÿå‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">æ¨¡ç¯„ç”Ÿå‹</div>
                    </div>
                    <div class="person-point subordinate-point" style="top: 25%; left: 20%;" data-type="subordinate" data-name="å­¦ç¿’å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">å­¦ç¿’å‹</div>
                    </div>
                    <div class="person-point subordinate-point" style="top: 30%; left: 35%;" data-type="subordinate" data-name="ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚«ãƒ¼å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚«ãƒ¼å‹</div>
                    </div>
                    <div class="person-point subordinate-point" style="top: 20%; left: 35%;" data-type="subordinate" data-name="èª¿æ•´å½¹å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">èª¿æ•´å½¹å‹</div>
                    </div>
                    <div class="person-point subordinate-point" style="top: 10%; left: 15%;" data-type="subordinate" data-name="ä¸å®‰å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">ä¸å®‰å‹</div>
                    </div>
                    
                    <div class="person-point subordinate-point" style="bottom: 20%; left: 25%;" data-type="subordinate" data-name="æŒ‡ç¤ºå¾…ã¡å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">æŒ‡ç¤ºå¾…ã¡å‹</div>
                    </div>
                    <div class="person-point subordinate-point" style="bottom: 30%; left: 35%;" data-type="subordinate" data-name="æ…é‡å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">æ…é‡å‹</div>
                    </div>
                    
                    <div class="person-point subordinate-point" style="bottom: 25%; right: 30%;" data-type="subordinate" data-name="è·äººå‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">è·äººå‹</div>
                    </div>
                    <div class="person-point subordinate-point" style="bottom: 35%; right: 20%;" data-type="subordinate" data-name="ç‹¬ç«‹å‹" onclick="selectFromQuadrant(this)">
                        <div class="person-label">ç‹¬ç«‹å‹</div>
                    </div>
                </div>
            </div>
            
            <!-- ç›¸æ€§ãƒãƒˆãƒªã‚¯ã‚¹ -->
            <div class="section">
                <h2>ğŸ“‹ ç›¸æ€§ãƒãƒˆãƒªã‚¯ã‚¹ï¼ˆ144ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰</h2>
                <div class="matrix-container">
                    <table class="matrix-table">
                        <thead>
                            <tr>
                                <th class="row-header">ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼¼éƒ¨ä¸‹</th>
                                <th class="col-header">æ¨¡ç¯„ç”Ÿå‹</th>
                                <th class="col-header">è‡ªå¾‹å®Ÿè¡Œå‹</th>
                                <th class="col-header">è·äººå‹</th>
                                <th class="col-header">ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚«ãƒ¼å‹</th>
                                <th class="col-header">ç©æ¥µææ¡ˆå‹</th>
                                <th class="col-header">æ…é‡å‹</th>
                                <th class="col-header">å­¦ç¿’å‹</th>
                                <th class="col-header">æŒ‡ç¤ºå¾…ã¡å‹</th>
                                <th class="col-header">å•é¡Œè§£æ±ºå‹</th>
                                <th class="col-header">èª¿æ•´å½¹å‹</th>
                                <th class="col-header">ç‹¬ç«‹å‹</th>
                                <th class="col-header">ä¸å®‰å‹</th>
                            </tr>
                        </thead>
                        <tbody id="matrixBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- è©³ç´°ãƒ‘ãƒãƒ« -->
        <div class="detail-panel" id="detailPanel" style="display: none;">
            <div class="detail-title" id="detailTitle">çµ„ã¿åˆã‚ã›ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
            <div id="detailContent">
                <p>4è±¡é™ãƒãƒƒãƒ”ãƒ³ã‚°ã®ç‚¹ã¾ãŸã¯ãƒãƒˆãƒªã‚¯ã‚¹ã®ã‚»ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€è©³ç´°ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
            </div>
        </div>
    </div>

    <script>
        let selectedManager = null;
        let selectedSubordinate = null;
        let showAllMode = false;
        let syncMode = true;
        let selectedMatrixCell = null;

        const managerTypes = [
            'å¯†ç€æŒ‡å°å‹', 'å§”è­²æˆé•·å‹', 'çµæœé‡è¦–å‹', 'å”èª¿å‹', 'åŠ¹ç‡è¿½æ±‚å‹', 'å®‰å®šç®¡ç†å‹',
            'ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‹', 'ç«æ¶ˆã—å‹', 'ãƒ“ã‚¸ãƒ§ãƒ³å‹', 'èª¿æ•´å‹', 'ä¿è­·å‹', 'å®Œç’§ä¸»ç¾©å‹'
        ];

        const subordinateTypes = [
            'æ¨¡ç¯„ç”Ÿå‹', 'è‡ªå¾‹å®Ÿè¡Œå‹', 'è·äººå‹', 'ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚«ãƒ¼å‹', 'ç©æ¥µææ¡ˆå‹', 'æ…é‡å‹',
            'å­¦ç¿’å‹', 'æŒ‡ç¤ºå¾…ã¡å‹', 'å•é¡Œè§£æ±ºå‹', 'èª¿æ•´å½¹å‹', 'ç‹¬ç«‹å‹', 'ä¸å®‰å‹'
        ];

        // ç›¸æ€§ãƒãƒˆãƒªã‚¯ã‚¹
        const compatibilityMatrix = [
            [4, 3, 2, 4, 3, 4, 4, 4, 3, 4, 2, 4], // å¯†ç€æŒ‡å°å‹
            [3, 4, 3, 3, 4, 3, 4, 2, 4, 3, 3, 2], // å§”è­²æˆé•·å‹
            [2, 4, 4, 2, 3, 2, 2, 3, 4, 2, 4, 1], // çµæœé‡è¦–å‹
            [4, 3, 2, 4, 4, 3, 3, 3, 3, 4, 2, 3], // å”èª¿å‹
            [2, 4, 3, 2, 4, 2, 3, 2, 4, 2, 3, 2], // åŠ¹ç‡è¿½æ±‚å‹
            [4, 2, 3, 3, 2, 4, 3, 4, 2, 3, 2, 4], // å®‰å®šç®¡ç†å‹
            [3, 3, 4, 3, 3, 3, 4, 3, 3, 3, 3, 3], // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‹
            [2, 3, 3, 2, 3, 2, 2, 2, 4, 2, 3, 2], // ç«æ¶ˆã—å‹
            [3, 4, 2, 3, 4, 2, 4, 2, 3, 3, 3, 2], // ãƒ“ã‚¸ãƒ§ãƒ³å‹
            [3, 3, 2, 4, 3, 3, 3, 3, 3, 4, 2, 3], // èª¿æ•´å‹
            [3, 3, 3, 4, 3, 4, 3, 3, 2, 4, 2, 4], // ä¿è­·å‹
            [3, 2, 3, 2, 2, 4, 3, 3, 2, 2, 2, 3]  // å®Œç’§ä¸»ç¾©å‹
        ];

        const compatibilitySymbols = { 4: 'â—', 3: 'â—‹', 2: 'â–³', 1: 'Ã—' };
        const compatibilityClasses = { 4: 'excellent', 3: 'good', 2: 'normal', 1: 'difficult' };
        const compatibilityTexts = { 4: 'æŠœç¾¤', 3: 'è‰¯å¥½', 2: 'æ™®é€š', 1: 'å›°é›£' };

        // ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆã‚µãƒ³ãƒ—ãƒ«ï¼‰
        const communicationStyles = {
            'å¯†ç€æŒ‡å°å‹-æ¨¡ç¯„ç”Ÿå‹': {
                managerStyle: ['è©³ç´°ãªé€²æ—ç¢ºèªã‚’å®šæœŸçš„ã«å®Ÿæ–½', 'ä¸å¯§ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¨æˆé•·æ”¯æ´', 'äº‹å‰ç›¸è«‡ã‚’ç©æ¥µçš„ã«å—ã‘å…¥ã‚Œ', 'ã“ã¾ã‚ãªå£°ã‹ã‘ã§ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç¶­æŒ'],
                subordinateStyle: ['èƒŒæ™¯ãƒ»çµŒç·¯ã‚’å«ã‚€è©³ç´°ãªå ±å‘Š', 'äº‹å‰ç›¸è«‡ã‚’æ¬ ã‹ã•ãªã„', 'ã“ã¾ã‚ãªé€²æ—å…±æœ‰', 'ç©æ¥µçš„ãªè³ªå•ã¨ç¢ºèª'],
                tips: 'ç†æƒ³çš„ãªçµ„ã¿åˆã‚ã›ã€‚é«˜å¯†åº¦ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨æŒ‡å°ã«ã‚ˆã‚‹ç€å®Ÿãªæˆé•·ãŒæœŸå¾…ã§ãã‚‹ã€‚'
            }
        };

        function initializeSelects() {
            const managerSelect = document.getElementById('managerSelect');
            const subordinateSelect = document.getElementById('subordinateSelect');

            managerTypes.forEach(type => {
                const option = document.createElement('option');
                option.value = type;
                option.textContent = type;
                managerSelect.appendChild(option);
            });

            subordinateTypes.forEach(type => {
                const option = document.createElement('option');
                option.value = type;
                option.textContent = type;
                subordinateSelect.appendChild(option);
            });

            managerSelect.onchange = () => selectFromDropdown('manager', managerSelect.value);
            subordinateSelect.onchange = () => selectFromDropdown('subordinate', subordinateSelect.value);
        }

        function createMatrix() {
            const tbody = document.getElementById('matrixBody');
            
            for (let i = 0; i < managerTypes.length; i++) {
                const row = document.createElement('tr');
                
                const headerCell = document.createElement('td');
                headerCell.className = 'row-header-cell';
                headerCell.textContent = managerTypes[i];
                row.appendChild(headerCell);
                
                for (let j = 0; j < subordinateTypes.length; j++) {
                    const cell = document.createElement('td');
                    const value = compatibilityMatrix[i][j];
                    cell.textContent = compatibilitySymbols[value];
                    cell.className = compatibilityClasses[value];
                    cell.dataset.manager = managerTypes[i];
                    cell.dataset.subordinate = subordinateTypes[j];
                    cell.dataset.managerIndex = i;
                    cell.dataset.subordinateIndex = j;
                    cell.onclick = () => selectFromMatrix(cell, i, j);
                    row.appendChild(cell);
                }
                
                tbody.appendChild(row);
            }
        }

        function selectFromDropdown(type, name) {
            if (!name) return;
            
            if (type === 'manager') {
                selectedManager = name;
                // 4è±¡é™ã®ç‚¹ã‚’é¸æŠ
                const points = document.querySelectorAll(`[data-type="manager"][data-name="${name}"]`);
                document.querySelectorAll('.manager-point').forEach(p => p.classList.remove('selected'));
                if (points.length > 0) points[0].classList.add('selected');
            } else {
                selectedSubordinate = name;
                const points = document.querySelectorAll(`[data-type="subordinate"][data-name="${name}"]`);
                document.querySelectorAll('.subordinate-point').forEach(p => p.classList.remove('selected'));
                if (points.length > 0) points[0].classList.add('selected');
            }
            
            updateDisplay();
        }

        function selectFromQuadrant(element) {
            const type = element.dataset.type;
            const name = element.dataset.name;

            if (type === 'manager') {
                selectedManager = name;
                document.getElementById('managerSelect').value = name;
                document.querySelectorAll('.manager-point').forEach(p => p.classList.remove('selected'));
            } else {
                selectedSubordinate = name;
                document.getElementById('subordinateSelect').value = name;
                document.querySelectorAll('.subordinate-point').forEach(p => p.classList.remove('selected'));
            }

            element.classList.add('selected');
            updateDisplay();
        }

        function selectFromMatrix(cell, managerIndex, subordinateIndex) {
            const managerName = managerTypes[managerIndex];
            const subordinateName = subordinateTypes[subordinateIndex];
            
            // å‰ã®é¸æŠã‚’ã‚¯ãƒªã‚¢
            if (selectedMatrixCell) selectedMatrixCell.classList.remove('selected');
            selectedMatrixCell = cell;
            cell.classList.add('selected');
            
            selectedManager = managerName;
            selectedSubordinate = subordinateName;
            
            // ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’æ›´æ–°
            document.getElementById('managerSelect').value = managerName;
            document.getElementById('subordinateSelect').value = subordinateName;
            
            if (syncMode) {
                // 4è±¡é™ã®ç‚¹ã‚‚æ›´æ–°
                document.querySelectorAll('.person-point').forEach(p => p.classList.remove('selected'));
                document.querySelectorAll(`[data-name="${managerName}"]`).forEach(p => p.classList.add('selected'));
                document.querySelectorAll(`[data-name="${subordinateName}"]`).forEach(p => p.classList.add('selected'));
            }
            
            updateDisplay();
        }

        function updateDisplay() {
            // ç›¸æ€§ç·šã‚’ã‚¯ãƒªã‚¢
            document.querySelectorAll('.compatibility-line').forEach(line => line.remove());

            if (selectedManager && selectedSubordinate) {
                if (syncMode) {
                    drawCompatibilityLine();
                }
                showCombinationDetail();
            }

            updateVisibility();
        }

        function drawCompatibilityLine() {
            const managerPoint = document.querySelector(`[data-type="manager"][data-name="${selectedManager}"]`);
            const subordinatePoint = document.querySelector(`[data-type="subordinate"][data-name="${selectedSubordinate}"]`);
            
            if (!managerPoint || !subordinatePoint) return;

            const managerRect = managerPoint.getBoundingClientRect();
            const subordinateRect = subordinatePoint.getBoundingClientRect();
            const containerRect = document.querySelector('.quadrant-container').getBoundingClientRect();

            const managerX = managerRect.left + managerRect.width/2 - containerRect.left;
            const managerY = managerRect.top + managerRect.height/2 - containerRect.top;
            const subordinateX = subordinateRect.left + subordinateRect.width/2 - containerRect.left;
            const subordinateY = subordinateRect.top + subordinateRect.height/2 - containerRect.top;

            const deltaX = subordinateX - managerX;
            const deltaY = subordinateY - managerY;
            const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
            const angle = Math.atan2(deltaY, deltaX) * 180 / Math.PI;

            const line = document.createElement('div');
            line.className = 'compatibility-line';
            
            const managerIndex = managerTypes.indexOf(selectedManager);
            const subordinateIndex = subordinateTypes.indexOf(selectedSubordinate);
            const compatibility = compatibilityMatrix[managerIndex][subordinateIndex];
            
            if (compatibility === 4) line.classList.add('compatibility-excellent');
            else if (compatibility === 3) line.classList.add('compatibility-good');
            else if (compatibility === 2) line.classList.add('compatibility-normal');
            else line.classList.add('compatibility-difficult');

            line.style.left = managerX + 'px';
            line.style.top = managerY + 'px';
            line.style.width = distance + 'px';
            line.style.transform = `rotate(${angle}deg)`;

            document.querySelector('.quadrant-container').appendChild(line);
        }

        function showCombinationDetail() {
            const managerIndex = managerTypes.indexOf(selectedManager);
            const subordinateIndex = subordinateTypes.indexOf(selectedSubordinate);
            const compatibility = compatibilityMatrix[managerIndex][subordinateIndex];
            
            const key = `${selectedManager}-${selectedSubordinate}`;
            const style = communicationStyles[key] || generateDefaultStyle(compatibility);

            const panel = document.getElementById('detailPanel');
            const title = document.getElementById('detailTitle');
            const content = document.getElementById('detailContent');

            title.innerHTML = `${selectedManager} Ã— ${selectedSubordinate}`;

            content.innerHTML = `
                <div class="compatibility-info">
                    <div class="compatibility-score ${compatibilityClasses[compatibility]}">
                        ${compatibilitySymbols[compatibility]} ${compatibilityTexts[compatibility]}
                    </div>
                    <p>4è±¡é™ä½ç½®: ${getQuadrantInfo(selectedManager, selectedSubordinate)}</p>
                </div>
                <div class="detail-content">
                    <div class="communication-style">
                        <h4>ğŸ“‹ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼å´ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ</h4>
                        <ul class="style-list">
                            ${style.managerStyle.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="communication-style">
                        <h4>ğŸ‘¤ éƒ¨ä¸‹å´ã®å¯¾å¿œã‚¹ã‚¿ã‚¤ãƒ«</h4>
                        <ul class="style-list">
                            ${style.subordinateStyle.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                </div>
                <div class="communication-style" style="margin-top: 15px;">
                    <h4>ğŸ’¡ ç›¸æ€§æ´»ç”¨ã®ã‚³ãƒ„</h4>
                    <p>${style.tips}</p>
                </div>
            `;

            panel.style.display = 'block';
        }

        function generateDefaultStyle(compatibility) {
            let tips = '';
            if (compatibility === 4) {
                tips = 'éå¸¸ã«ç›¸æ€§ãŒè‰¯ãã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯†åº¦ã¨ä¸»å°æ¨©ã®ãƒãƒ©ãƒ³ã‚¹ãŒç†æƒ³çš„ã§ã™ã€‚';
            } else if (compatibility === 3) {
                tips = 'è‰¯å¥½ãªç›¸æ€§ã§ã™ã€‚ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã®èª¿æ•´ã§æ›´ã«è‰¯ã„é–¢ä¿‚ã‚’ç¯‰ã‘ã¾ã™ã€‚';
            } else if (compatibility === 2) {
                tips = 'å·¥å¤«ãŒå¿…è¦ãªçµ„ã¿åˆã‚ã›ã§ã™ã€‚ãŠäº’ã„ã®ç‰¹å¾´ã‚’ç†è§£ã—åˆã†ã“ã¨ãŒé‡è¦ã§ã™ã€‚';
            } else {
                tips = 'ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã®é•ã„ãŒå¤§ãã„çµ„ã¿åˆã‚ã›ã§ã™ã€‚ç‰¹åˆ¥ãªé…æ…®ãŒå¿…è¦ã§ã™ã€‚';
            }

            return {
                managerStyle: ['çŠ¶æ³ã«å¿œã˜ãŸæŸ”è»Ÿãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒ', 'éƒ¨ä¸‹ã®ç‰¹æ€§ã‚’ç†è§£ã—ãŸæŒ‡å°', 'é©åˆ‡ãªè·é›¢æ„Ÿã®ç¶­æŒ'],
                subordinateStyle: ['ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã‚ã›ãŸå¯¾å¿œ', 'ç©æ¥µçš„ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³', 'ç›¸äº’ç†è§£ã®ä¿ƒé€²'],
                tips: tips
            };
        }

        function getQuadrantInfo(manager, subordinate) {
            const mQuad = getPersonQuadrant(manager, 'manager');
            const sQuad = getPersonQuadrant(subordinate, 'subordinate');
            return `M:${mQuad} / S:${sQuad}`;
        }

        function getPersonQuadrant(name, type) {
            if (type === 'manager') {
                if (['å§”è­²æˆé•·å‹', 'å”èª¿å‹', 'ãƒ“ã‚¸ãƒ§ãƒ³å‹', 'ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‹'].includes(name)) return 'å¯†æ¥å§”è­²';
                if (['å¯†ç€æŒ‡å°å‹', 'å®‰å®šç®¡ç†å‹', 'å®Œç’§ä¸»ç¾©å‹', 'ä¿è­·å‹'].includes(name)) return 'å¯†æ¥æŒ‡å°';
                if (['åŠ¹ç‡è¿½æ±‚å‹', 'ç«æ¶ˆã—å‹'].includes(name)) return 'è·é›¢æŒ‡å°';
                if (['çµæœé‡è¦–å‹', 'èª¿æ•´å‹'].includes(name)) return 'è·é›¢å§”è­²';
            } else {
                if (['ç©æ¥µææ¡ˆå‹', 'å•é¡Œè§£æ±ºå‹', 'è‡ªå¾‹å®Ÿè¡Œå‹'].includes(name)) return 'å¯†æ¥å§”è­²';
                if (['æ¨¡ç¯„ç”Ÿå‹', 'å­¦ç¿’å‹', 'ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚«ãƒ¼å‹', 'èª¿æ•´å½¹å‹', 'ä¸å®‰å‹'].includes(name)) return 'å¯†æ¥æŒ‡å°';
                if (['æŒ‡ç¤ºå¾…ã¡å‹', 'æ…é‡å‹'].includes(name)) return 'è·é›¢æŒ‡å°';
                if (['è·äººå‹', 'ç‹¬ç«‹å‹'].includes(name)) return 'è·é›¢å§”è­²';
            }
            return 'ä¸æ˜';
        }

        function toggleShowAll() {
            showAllMode = !showAllMode;
            const btn = document.getElementById('showAllBtn');
            btn.textContent = showAllMode ? 'é¸æŠè¡¨ç¤º' : 'å…¨è¡¨ç¤º';
            btn.classList.toggle('active', showAllMode);
            updateVisibility();
        }

        function toggleSync() {
            syncMode = !syncMode;
            const btn = document.getElementById('syncBtn');
            btn.textContent = syncMode ? 'é€£å‹•OFF' : 'é€£å‹•è¡¨ç¤º';
            btn.classList.toggle('active', !syncMode);
            updateDisplay();
        }

        function updateVisibility() {
            const allPoints = document.querySelectorAll('.person-point');
            
            if (showAllMode) {
                allPoints.forEach(point => point.style.display = 'block');
            } else {
                allPoints.forEach(point => {
                    const name = point.dataset.name;
                    if (name === selectedManager || name === selectedSubordinate) {
                        point.style.display = 'block';
                    } else {
                        point.style.display = 'none';
                    }
                });
            }
        }

        // åˆæœŸåŒ–
        initializeSelects();
        createMatrix();
        updateVisibility();
    </script>
</body>
</html>
